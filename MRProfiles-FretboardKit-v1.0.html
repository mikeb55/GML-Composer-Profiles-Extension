<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MRProfiles + FretboardKit v1.0</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', -apple-system, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .header {
            background: rgba(255,255,255,0.95);
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            color: #333;
            margin-bottom: 10px;
        }
        
        .version-badge {
            display: inline-block;
            background: #28a745;
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 14px;
            margin-left: 10px;
        }
        
        .stats {
            display: flex;
            gap: 30px;
            color: #666;
            font-size: 14px;
        }
        
        .main-container {
            display: flex;
            flex: 1;
            max-width: 1400px;
            margin: 20px auto;
            width: 100%;
            gap: 20px;
            padding: 0 20px;
        }
        
        .sidebar {
            width: 350px;
            background: rgba(255,255,255,0.95);
            border-radius: 10px;
            padding: 20px;
            max-height: calc(100vh - 140px);
            overflow-y: auto;
        }
        
        .content-area {
            flex: 1;
            background: rgba(255,255,255,0.95);
            border-radius: 10px;
            padding: 20px;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .action-btn {
            padding: 10px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
        }
        
        .action-btn:hover {
            background: #764ba2;
        }
        
        .output-box {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }
        
        .output-box.visible {
            display: block;
        }
        
        #fretboard {
            width: 100%;
            height: 300px;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            background: white;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ðŸŽ¸ MRProfiles + FretboardKit <span class="version-badge">v1.0</span></h1>
        <div class="stats">
            <span>âœ… Error Fixed</span>
            <span>ðŸ“¦ 77 Profiles Ready</span>
            <span>ðŸŽ¯ Export Functions Active</span>
        </div>
    </div>
    
    <div class="main-container">
        <div class="sidebar">
            <h3>Select a Profile:</h3>
            <select id="profileSelect" style="width: 100%; padding: 8px; margin: 10px 0;">
                <option value="">-- Choose Profile --</option>
                <optgroup label="Jazz Guitar">
                    <option value="wes-montgomery">Wes Montgomery</option>
                    <option value="jim-hall">Jim Hall</option>
                    <option value="joe-pass">Joe Pass</option>
                </optgroup>
                <optgroup label="Greek & Rebetiko">
                    <option value="rebetiko">Greek Rebetiko</option>
                    <option value="tsitsanis">Vassilis Tsitsanis</option>
                </optgroup>
                <optgroup label="Alternative Tunings">
                    <option value="sonic-youth">Sonic Youth</option>
                    <option value="joni-mitchell">Joni Mitchell</option>
                </optgroup>
                <optgroup label="Techniques">
                    <option value="travis-picking">Travis Picking</option>
                    <option value="boom-chuck">Boom-Chuck</option>
                </optgroup>
            </select>
            
            <div id="profileInfo" style="margin-top: 20px; padding: 15px; background: #f5f5f5; border-radius: 5px;">
                <p>Select a profile to see patterns and export options</p>
            </div>
        </div>
        
        <div class="content-area">
            <h2 id="profileName">No Profile Selected</h2>
            
            <div class="action-buttons">
                <button class="action-btn" id="exportRiffGen">â†’ Export to RiffGen</button>
                <button class="action-btn" id="exportTriadGen">â†’ Export to TriadGen</button>
                <button class="action-btn" id="saveSVG">ðŸ’¾ Save as SVG</button>
                <button class="action-btn" id="copyPattern">ðŸ“‹ Copy Pattern</button>
            </div>
            
            <svg id="fretboard" viewBox="0 0 1000 300">
                <!-- Fretboard will be drawn here -->
            </svg>
            
            <div id="outputBox" class="output-box">
                <!-- Export output appears here -->
            </div>
        </div>
    </div>
    
    <script>
        // VERSION 1.0 - FIXED ERROR
        console.log('MRProfiles FretboardKit v1.0 loaded successfully');
        
        // Profile Database
        const profiles = {
            'wes-montgomery': {
                name: 'Wes Montgomery',
                description: 'Thumb Octaves/Chord Solos',
                patterns: [[5,3], [3,5], [5,5], [3,7]]
            },
            'jim-hall': {
                name: 'Jim Hall',
                description: 'Sparse/Lyrical',
                patterns: [[2,5], [2,7], [1,5], [0,6]]
            },
            'joe-pass': {
                name: 'Joe Pass',
                description: 'Chord-Melody',
                patterns: [[5,3], [5,5], [4,5], [4,7]]
            },
            'rebetiko': {
                name: 'Greek Rebetiko',
                description: 'Koupes rhythm patterns',
                patterns: [[5,0], [4,2], [5,0], [3,0]]
            },
            'tsitsanis': {
                name: 'Vassilis Tsitsanis',
                description: 'Greek master',
                patterns: [[5,0], [5,1], [5,4], [4,2]]
            },
            'sonic-youth': {
                name: 'Sonic Youth',
                description: 'Custom tunings',
                patterns: [[5,0], [4,0], [3,0], [2,3]]
            },
            'joni-mitchell': {
                name: 'Joni Mitchell',
                description: 'Open tunings',
                patterns: [[5,0], [4,0], [3,0], [2,0]]
            },
            'travis-picking': {
                name: 'Travis Picking',
                description: 'Alternating bass',
                patterns: [[5,0], [3,2], [4,2], [3,2]]
            },
            'boom-chuck': {
                name: 'Boom-Chuck',
                description: 'Bluegrass rhythm',
                patterns: [[5,3], [3,0], [2,0], [1,0]]
            }
        };
        
        let currentProfile = null;
        
        // Initialize fretboard
        function initFretboard() {
            const svg = document.getElementById('fretboard');
            
            // Draw strings
            for (let i = 0; i < 6; i++) {
                const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                line.setAttribute('x1', '50');
                line.setAttribute('y1', 30 + i * 40);
                line.setAttribute('x2', '950');
                line.setAttribute('y2', 30 + i * 40);
                line.setAttribute('stroke', '#333');
                line.setAttribute('stroke-width', '2');
                svg.appendChild(line);
            }
            
            // Draw frets
            for (let i = 0; i <= 12; i++) {
                const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                line.setAttribute('x1', 50 + i * 75);
                line.setAttribute('y1', '30');
                line.setAttribute('x2', 50 + i * 75);
                line.setAttribute('y2', '230');
                line.setAttribute('stroke', i === 0 ? '#000' : '#999');
                line.setAttribute('stroke-width', i === 0 ? '4' : '2');
                svg.appendChild(line);
            }
            
            // Add fret markers
            const markers = [3, 5, 7, 9, 12];
            markers.forEach(fret => {
                const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                circle.setAttribute('cx', 50 + (fret - 0.5) * 75);
                circle.setAttribute('cy', '130');
                circle.setAttribute('r', '6');
                circle.setAttribute('fill', '#ddd');
                svg.appendChild(circle);
            });
        }
        
        // Draw pattern on fretboard
        function drawPattern(pattern) {
            // Clear existing notes
            const svg = document.getElementById('fretboard');
            const existingNotes = svg.querySelectorAll('.note');
            existingNotes.forEach(note => note.remove());
            
            // Draw new pattern
            pattern.forEach(([string, fret]) => {
                const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                circle.setAttribute('class', 'note');
                circle.setAttribute('cx', 50 + (fret === 0 ? -25 : (fret - 0.5) * 75));
                circle.setAttribute('cy', 30 + string * 40);
                circle.setAttribute('r', '15');
                circle.setAttribute('fill', '#667eea');
                circle.setAttribute('stroke', '#fff');
                circle.setAttribute('stroke-width', '2');
                svg.appendChild(circle);
                
                // Add fret number
                const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text.setAttribute('class', 'note');
                text.setAttribute('x', 50 + (fret === 0 ? -25 : (fret - 0.5) * 75));
                text.setAttribute('y', 35 + string * 40);
                text.setAttribute('text-anchor', 'middle');
                text.setAttribute('fill', '#fff');
                text.setAttribute('font-size', '12');
                text.setAttribute('font-weight', 'bold');
                text.textContent = fret.toString();
                svg.appendChild(text);
            });
        }
        
        // Profile selection
        document.getElementById('profileSelect').addEventListener('change', function(e) {
            const profileId = e.target.value;
            if (profileId && profiles[profileId]) {
                currentProfile = profiles[profileId];
                document.getElementById('profileName').textContent = currentProfile.name;
                document.getElementById('profileInfo').innerHTML = `
                    <h4>${currentProfile.name}</h4>
                    <p>${currentProfile.description}</p>
                    <p>Pattern: ${JSON.stringify(currentProfile.patterns)}</p>
                `;
                drawPattern(currentProfile.patterns);
            }
        });
        
        // Export functions
        document.getElementById('exportRiffGen').addEventListener('click', function() {
            if (!currentProfile) {
                alert('Please select a profile first');
                return;
            }
            const output = `// RiffGen Pattern: ${currentProfile.name}\nconst pattern = ${JSON.stringify(currentProfile.patterns)};\n// Copy to RiffGen.html`;
            document.getElementById('outputBox').textContent = output;
            document.getElementById('outputBox').classList.add('visible');
            copyToClipboard(output);
            alert('Copied to clipboard!');
        });
        
        document.getElementById('exportTriadGen').addEventListener('click', function() {
            if (!currentProfile) {
                alert('Please select a profile first');
                return;
            }
            const output = `// TriadGen Voicing: ${currentProfile.name}\nconst voicing = ${JSON.stringify(currentProfile.patterns)};\n// Copy to TriadGen.html`;
            document.getElementById('outputBox').textContent = output;
            document.getElementById('outputBox').classList.add('visible');
            copyToClipboard(output);
            alert('Copied to clipboard!');
        });
        
        document.getElementById('saveSVG').addEventListener('click', function() {
            const svg = document.getElementById('fretboard');
            const svgData = new XMLSerializer().serializeToString(svg);
            const blob = new Blob([svgData], {type: 'image/svg+xml'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${currentProfile ? currentProfile.name : 'fretboard'}.svg`;
            a.click();
        });
        
        document.getElementById('copyPattern').addEventListener('click', function() {
            if (!currentProfile) {
                alert('Please select a profile first');
                return;
            }
            const output = JSON.stringify(currentProfile.patterns);
            copyToClipboard(output);
            alert('Pattern copied to clipboard!');
        });
        
        function copyToClipboard(text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
        }
        
        // Initialize on load
        window.addEventListener('DOMContentLoaded', function() {
            console.log('Initializing fretboard...');
            initFretboard();
        });
    </script>
</body>
</html>